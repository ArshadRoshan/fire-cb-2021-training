<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Intermediate CLI Usage | 2021 FIRE-CB Training Modules</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="More-advanced command-line usage Previously I promised you that there were some big advantages to command-line tools that leads to people actively using them decades after they were made when there are attractive, graphical alternatives. So far, we haven&rsquo;t really seen anything that can&rsquo;t be trivially done with tools you are more familiar with. That will change now. Like before, you may choose to follow this section here, in DataCamp, or both.">
    <meta name="generator" content="Hugo 0.80.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      

    

    
    
    <meta property="og:title" content="Intermediate CLI Usage" />
<meta property="og:description" content="More-advanced command-line usage Previously I promised you that there were some big advantages to command-line tools that leads to people actively using them decades after they were made when there are attractive, graphical alternatives. So far, we haven&rsquo;t really seen anything that can&rsquo;t be trivially done with tools you are more familiar with. That will change now. Like before, you may choose to follow this section here, in DataCamp, or both." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://training.fire.tryps.in/basics_module/cli_intermediate/" />
<meta property="article:published_time" content="2021-01-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" />
<meta itemprop="name" content="Intermediate CLI Usage">
<meta itemprop="description" content="More-advanced command-line usage Previously I promised you that there were some big advantages to command-line tools that leads to people actively using them decades after they were made when there are attractive, graphical alternatives. So far, we haven&rsquo;t really seen anything that can&rsquo;t be trivially done with tools you are more familiar with. That will change now. Like before, you may choose to follow this section here, in DataCamp, or both.">
<meta itemprop="datePublished" content="2021-01-28T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-01-28T00:00:00+00:00" />
<meta itemprop="wordCount" content="1486">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Intermediate CLI Usage"/>
<meta name="twitter:description" content="More-advanced command-line usage Previously I promised you that there were some big advantages to command-line tools that leads to people actively using them decades after they were made when there are attractive, graphical alternatives. So far, we haven&rsquo;t really seen anything that can&rsquo;t be trivially done with tools you are more familiar with. That will change now. Like before, you may choose to follow this section here, in DataCamp, or both."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        2021 FIRE-CB Training Modules
      
    </a>
    <div class="flex-l items-center">
      

      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        COMPUTATIONAL BIOLOGY BASICS MODULE
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://training.fire.tryps.in/basics_module/cli_intermediate/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://training.fire.tryps.in/basics_module/cli_intermediate/&amp;text=Intermediate%20CLI%20Usage" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://training.fire.tryps.in/basics_module/cli_intermediate/&amp;title=Intermediate%20CLI%20Usage" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Intermediate CLI Usage</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-01-28T00:00:00Z">January 28, 2021</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id="more-advanced-command-line-usage">More-advanced command-line usage</h2>
<p>Previously I promised you that there were some big advantages to command-line tools that leads to people actively using them decades after they were made when there are attractive, graphical alternatives. So far, we haven&rsquo;t really seen anything that can&rsquo;t be trivially done with tools you are more familiar with. That will change now. Like before, you may choose to follow this section here, <a href="https://campus.datacamp.com/courses/introduction-to-shell/combining-tools?ex=1">in DataCamp</a>, or both. I strongly recommend doing the DataCamps.</p>
<iframe src="https://umd.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=b5f627f3-2ba3-40ee-a40c-acc2012acf5f&autoplay=false&offerviewer=true&showtitle=true&showbrand=false&start=0&interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen allow="autoplay"></iframe>
<p><a href="https://umd.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=b5f627f3-2ba3-40ee-a40c-acc2012acf5f">Watch the video &ldquo;Intermediate Input/Output&rdquo;</a></p>
<h3 id="command-input-and-output">Command input and output</h3>
<p>So far we have used commands in a way that only takes input from files and prints output to the screen. You may have heard me use the term <strong>standard output</strong>. At the core of Unix-style tools is a very structured system for managing input and output data. This system allows for us to use and combine tools in amazingly powerful ways.</p>
<p>When we run the commands we have run, like <code>cat</code>, <code>head</code>, or <code>grep</code>, they have printed their output to your screen. This is not an integral part of those commands. Under the hood, these programs are sending their output to a specific place called <strong>standard output</strong>. Think of this like an output nozzle on a machine. By default, that nozzle is hooked up to your screen, but using some command line tools you can <strong>redirect</strong> that output to other places. The simplest way to redirect that output is with the greater-than sign or right angle-bracket <code>&gt;</code> <strong>redirection operator</strong>. If you construct a command that outputs data, then insert a <code>&gt;</code> symbol followed by a filename, the output of that command will be <em>saved to that file</em> instead of printed to the screen.</p>
<p>Try the following commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -n <span style="color:#ae81ff">7</span> /shared/module1/people/firecb.csv
$ head -n <span style="color:#ae81ff">7</span> /shared/module1/people/firecb.csv &gt; non-students.csv
</code></pre></div><p>You should find that the first command, which we learned last section, prints the first seven lines, containing the names of the Research Educator and Peer Mentors for our stream. The second command doesn&rsquo;t output anything to the screen!</p>
<details>
 <summary><i>Check whether you've created a new file and what the contents are.</i> </summary>
<p>You can check for the new file in the current folder (where we created it by using just a relative path name) with <code>ls</code>. You can use the <code>cat</code> command to output its contents:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat non-students.csv
</code></pre></div></details>
<p>We can use this <strong>redirection</strong> method as a simple way to combine two commands. If we wanted to get a list of only the Peer Mentors in our stream, we could take the output from our first command in <code>non-students.csv</code> and use <code>tail</code> to extract only the last five lines:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tail -n <span style="color:#ae81ff">5</span> non-students.csv &gt; peer-mentors.csv
</code></pre></div><h3 id="combining-commands-more-elegantly">Combining commands more elegantly</h3>
<p>Simply saving output and using it as the input for another command does work well, but can result in many temporary files and needs multiple commands. One of the most powerful features available with Unix tools is another method of redirecting command output: a <strong>pipe</strong> <code>|</code>.</p>
<p>A pipe lets you directly connect the output of one command to the input of another command. This also introduces a new concept that we haven&rsquo;t yet mentioned. We&rsquo;ve talked about <strong>standard output</strong>, but there is also a <strong>standard input</strong>. Unix commands not only have an output nozzle, they all have an <em>input nozzle</em> as well. We have been feeding our commands input information by giving them a file path as an argument, but almost all of the commands (except <code>nano</code> and <code>less</code>) that we have worked with will happily accept input as a <strong>pipe</strong> using their <strong>standard input</strong>.</p>
<p>We can combine <code>head</code> and <code>tail</code> to directly output the middle of a file in one command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -n <span style="color:#ae81ff">7</span> /shared/module1/people/firecb.csv | tail -n <span style="color:#ae81ff">5</span>
</code></pre></div><p>In this case we provide <code>head</code> with the file path as an argument, but hook the output of <code>head</code> directly up to the input of our <code>tail</code> command with a <strong>pipe</strong> <code>|</code>. Since <code>tail</code> is getting its input from the pipe, we don&rsquo;t need to give it a filename. This should output only those five lines containing Peer Mentors!</p>
<details>
 <summary><i>How would you connect `cut` and `head`/`tail` to see only the first names of the PMs?</i> </summary>
<p>You could insert the <code>cut</code> command anywhere in the chain of commands. For instance, any of the following commands would be equivalent:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cut -f <span style="color:#ae81ff">1</span> -d , /shared/module1/people/firecb.csv | head -n <span style="color:#ae81ff">7</span> | tail -n <span style="color:#ae81ff">5</span>
$ head -n <span style="color:#ae81ff">7</span> /shared/module1/people/firecb.csv | tail -n <span style="color:#ae81ff">5</span> | cut -f <span style="color:#ae81ff">1</span> -d ,
$ head -n <span style="color:#ae81ff">7</span> /shared/module1/people/firecb.csv | cut -f <span style="color:#ae81ff">1</span> -d , | tail -n <span style="color:#ae81ff">5</span>
</code></pre></div></details>
<p>You can chain together as many commands as you want, as long as they each provide output on <strong>standard output</strong> and take input from <strong>standard input</strong>! This can lead to some incredibly powerful commands that combine multiple steps simultaneously without any temporary files. This can be very important when our files can be gigabytes in size.</p>
<p>There are even more advanced uses of redirection and piping that we won&rsquo;t discuss here. If you are interested, I&rsquo;d be happy to talk about it more. You can also find good explanatory pages <a href="https://developer.ibm.com/technologies/linux/tutorials/l-lpic1-103-4/">here</a>, <a href="https://thoughtbot.com/blog/input-output-redirection-in-the-shell">here</a>, or <a href="https://catonmat.net/bash-one-liners-explained-part-three">here</a>, as well as many other places!</p>
<p>** *An important note **</p>
<ul>
<li>Once you start combining commands and using more complicated tools, you can occasionally get stuck with a command that hasn&rsquo;t crashed, but is expecting input it will never get. If you run a command and don&rsquo;t get presented with a new prompt ending with* <code>$ </code> *afterward, you may have reached this kind of deadlock. To interrupt a running command, you can hit <code>^C</code> or Ctrl-c to stop the command. If this fails to stop the command and give you a new prompt, something more serious may be wrong. Since we are working remotely, you can simply close your SSH window and open a new one</li>
</ul>
<h3 id="wildcards-and-more">Wildcards and more</h3>
<p>Most common commands accept more than one file at a time, as we have seen. While you can specify one after another in a list, there is a more powerful way to select multiple files at one: <strong>wildcards</strong>. Wildcards are special symbols that the shell will interpret as meaning more than one option. The most common wildcard character is the asterisk <code>*</code>. In most shells, the asterisk represents &ldquo;one or more characters&rdquo;, not including <code>/</code> or directory separators. This allows you to quickly perform the same task on many, many files at once, something often difficult, but not impossible, to do with traditional GUI software.</p>
<p>When we previously printed the contents of multiple files with <code>cat /shared/module1/people/jgoodson.txt /shared/module1/people/mmodak.txt</code>, we had to specify both files. If instead we wanted to print out the contents of <em>all of the files</em> in that folder, even if there were dozens, we could simply run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /shared/module1/people/*
</code></pre></div><p>The asterisk here means that the command will be given arguments matching all files of any name in the folder. If we wanted to limit it to only filenames ending in <code>.txt</code>, we could do the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /shared/module1/people/*.txt
</code></pre></div><details>
 <summary><i>How could you print only the first line of each of the two txt files?</i> </summary>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ head -n <span style="color:#ae81ff">1</span> /shared/module1/people*.txt
</code></pre></div></details>
<p>Other common wildcard characters include</p>
<ul>
<li><code>?</code> matches a single character, so <code>202?.txt</code> will match <code>2020.txt</code> or <code>2020.txt</code>, but not <code>2021-01.txt</code>.</li>
<li><code>[...]</code> matches any one of the characters inside the square brackets, so <code>202[01].txt</code> matches <code>2020.txt</code> or <code>2021.txt</code>, but not <code>2022.txt</code>.</li>
<li><code>{...}</code> matches any of the comma-separated patterns inside the curly brackets, so <code>{*.txt, *.csv}</code> matches any file whose name ends with <code>.txt</code> or <code>.csv</code>, but not files whose names end with <code>.pdf</code>.</li>
</ul>
<h3 id="downloading-files">Downloading files</h3>
<p>While you can upload files using Cyberduck or other SFTP programs, sometimes you may want to download large files to a remote server that you don&rsquo;t have the space on your local computer for. Other times, you may be on slow Wi-Fi, and uploading would take forever. Our compute server has extremely fast internet, so being able to directly download files to the server will frequently be useful. There are two commands frequently used for downloading files on the command-line: <code>curl</code> and <code>wget</code>. We will primarily use <code>wget</code>, although you should be aware of <code>curl</code> in case you come across it.</p>
<p><code>wget</code> has many options, but its simplest usage is when you just provide <code>wget</code> with a URL link to the file you want to download. <code>wget</code> will download the file and save it to the current directory, with its original file name.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://github.com/jgoodson/tape/archive/master.zip
</code></pre></div><p>Other useful options for <code>wget</code> include:</p>
<ul>
<li><code>-P</code> allows you to download a file to a specific folder: <code>wget -P output_folder [URL]</code></li>
<li><code>-O</code> allows you to specify a particular file name to save the file to: <code>wget -O new_filename.zip [URL]</code>.</li>
<li><code>-O</code> can also be used with a very special filename, <code>-</code>, to output the contents of the downloaded file to <strong>standard output</strong>: <code>wget -O - [URL] | head</code> will download the file and print the first ten lines without actually saving the file!</li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://training.fire.tryps.in/" >
    &copy;  2021 FIRE-CB Training Modules 2021 
  </a>
    <div>














</div>
  </div>
</footer>

  </body>
</html>
